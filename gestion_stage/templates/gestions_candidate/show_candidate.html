{% block content%}
{% load static %}
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="{% static 'css/table.css'%}" rel="stylesheet"></head>

<body>
    <h1>Liste des Candidates</h1>
    <table border="1" class="can">
        <th>Id_candidate</th>
        <th>Nom_complet</th>
        <th>universite</th>
        <th>niveau_academique</th>
        <th>specialite</th>
        <th>email</th>
        <th>Date_Naissance</th>
        <th>telephone</th>
        <th>Date_demande</th>
        <th>cv</th>
        <th>lettre_motivation</th>
        <th>demande</th>
        <th>periode</th>
        <th>actions</th>
        {% for user in candidate %}
        <tr>
            <td>{{ user.Id_candidat }} </td>
            <td>{{ user.Nom_complet }} </td>
            <td>{{ user.universite }}</td>
            <td>{{ user.niveau_academique }}</td>
            <td>{{ user.specialite }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.Date_Naissance }}</td>
            <td>{{ user.telephone }}</td>
            <td>{{ user.Date_demande }}</td>
            <td>{{ user.cv }}</td>
            <td>{{ user.lettre_motivation }}</td>
            <td>{{ user.demande }}</td>
            <td>{{ user.lettre_motivation }}</td>
            <td>{{user.periode}}</td>
            <td>
                <a href="#" data-id="{{user.Id_candidat}}"   onclick="confirmDelete(this);">
                    <i class="fa-solid fa-trash-can" style="color: rgb(231, 52, 52);"></i>
                </a>
            </td>
    
        </tr>
        {% endfor %}
    </table>
   <script>
        function confirmDelete(element) {
            const userId=element.getAttribute('data-id')
            Swal.fire({
                title: "Êtes-vous sûr?",
                text: "Vous ne pourrez pas revenir en arrière!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Oui, supprimez-le!"
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = "{% url 'delete_candidate' 0 %}".replace("0", userId);
                }
            });
        }
    </script>
</body>
{% endblock %}

    
        
   

